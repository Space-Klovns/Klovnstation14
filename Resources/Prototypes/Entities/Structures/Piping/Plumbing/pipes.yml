
- type: entity
  abstract: true
  parent: BaseItem
  id: FluidPipeBase
  name: fluid pipe
  description: "A steel fluid conduit. It's filled with many microscopic channels that carry individual reagents, akin to the structure of fiber-optic cable. In layman's terms: chem's dont react while inside. Fuck you. Don't make a bomb with this please."
  placement:
    mode: SnapgridCenter
  components:
  - type: Visibility
    layer: 1
  - type: SubFloorHide
  - type: Item
    size: Normal

  - type: Transform
    anchored: true
  - type: Anchorable
  - type: Rotatable
  - type: NodeContainer
  - type: Tag
    tags:
    - Pipe
  - type: StaticPrice
    price: 120
  - type: Physics
    canCollide: false
    bodyType: static
  - type: CollideOnAnchor

  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallicStrong # maybe just make this Metallic

  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 120
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]

  - type: Sprite
    sprite: Structures/Piping/Plumbing/fluid_pipe.rsi
    drawdepth: ThinPipe
    visible: false
  - type: Appearance

  - type: EmitSoundOnPickup
    sound:
      path: /Audio/Items/handling/wrench_pickup.ogg
      params:
        volume: -2
  - type: EmitSoundOnDrop
    sound:
      path: /Audio/Items/wrench_drop.ogg
      params:
        volume: -2
  - type: EmitSoundOnLand
    sound:
      collection: PipeDrop

- type: entity
  parent: FluidPipeBase
  id: FluidPipeStraight
  suffix: Straight
  components:
  - type: NodeContainer
    nodes:
      pipe:
        !type:PlumbingNode
        nodeGroupID: Plumbing
        pipeDirection: Longitudinal
  - type: Sprite
    layers:
    - map: [ "enum.PipeVisualLayers.Pipe" ]
      state: straight

- type: entity
  parent: FluidPipeStraight
  id: FluidPipeStraightViewable
  name: window fluid pipe
  description: A steel fluid conduit with a snazzy window to look inside with.
  suffix: Straight, Viewable
  components:
  - type: Sprite
    layers:
    - map: [ "enum.PipeVisualLayers.Pipe" ]
      state: straight-viewable
    - map: ["enum.SolutionContainerLayers.Fill"]
      state: f-straight-viewable-0
      visible: true
  - type: PlumbingDevice # :trollface:
  - type: PlumbingSolutionReplicator
    solution: pipe
    node: pipe
  - type: SolutionContainerManager
    solutions:
      pipe:
        maxVol: 50
  - type: ExaminableSolution
    solution: pipe
  - type: SolutionContainerVisuals
    solutionName: pipe
    maxFillLevels: 5
    fillBaseName: f-straight-viewable-

- type: entity
  parent: FluidPipeBase
  id: FluidPipeBend
  suffix: Bend
  components:
  - type: NodeContainer
    nodes:
      pipe:
        !type:PlumbingNode
        nodeGroupID: Plumbing
        pipeDirection: SEBend
  - type: Sprite
    layers:
    - map: [ "enum.PipeVisualLayers.Pipe" ]
      state: elbow

- type: entity
  parent: FluidPipeBase
  id: FluidPipeTJunction
  suffix: TJunction
  components:
  - type: NodeContainer
    nodes:
      plumbing:
        !type:PlumbingNode
        nodeGroupID: Plumbing
        pipeDirection: TSouth
  - type: Sprite
    layers:
    - map: [ "enum.PipeVisualLayers.Pipe" ]
      state: junction

- type: entity
  parent: FluidPipeBase
  id: FluidPipeFourway
  suffix: Fourway
  components:
  - type: Transform
    noRot: true
  - type: NodeContainer
    nodes:
      plumbing:
        !type:PlumbingNode
        nodeGroupID: Plumbing
        pipeDirection: Fourway
  - type: Sprite
    layers:
    - map: [ "enum.PipeVisualLayers.Pipe" ]
      state: quad

